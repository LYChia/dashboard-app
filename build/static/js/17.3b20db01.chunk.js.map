{"version":3,"sources":["components/AlertDialog.tsx","components/global/ThemeSwitch.tsx","components/NoContent.tsx","components/layouts/PageLayout.tsx","logic/common/usersUtils.ts","components/NoPermissions.tsx","components/users/CreateUser.tsx","pages/dashboard-pages/Users.tsx"],"names":["Transition","React","props","ref","direction","AlertDialog","open","onSubmit","onCancel","submitText","cancelText","text","title","submitColor","TransitionComponent","keepMounted","onClose","id","variant","onClick","color","useStyles","makeStyles","theme","track","backgroundColor","palette","grey","ThemeSwitch","classes","useTheme","type","checked","undefined","NoContent","desktopMode","useMediaQuery","breakpoints","up","Icon","message","fontRatio","style","width","height","textAlign","container","justifyContent","alignItems","fontSize","getModeColor","marginTop","PageLayout","largeDesktopMode","className","showSideInfo","children","elevation","sideInfo","mapAuthScopeToDisplay","AuthScopes","AdminAuth","UserAuth","NoPermissions","t","useTranslation","SensitiveContent","requiredScopes","includes","sessionManager","scope","DEFAULT_FONT_SIZE","SIDE_CONTAINER_DEFAULT_FONT_SIZE","CreateUserInput","Grid","disabled","hint","optional","CreateUser","history","useHistory","useData","usersService","skipErrorToastOnFailure","users","useState","creating","setCreating","name","setName","nameError","setNameError","email","setEmail","emailError","setEmailError","emailExistsError","setEmailExistsError","password","setPassword","passwordError","setPasswordError","passwordLengthError","setPasswordLengthError","passwordVerify","setPasswordVerify","passwordVerifyError","setPasswordVerifyError","passwordNotMatchError","setPasswordNotMatchError","setScope","scopeError","setScopeError","forceMfa","setForceMfa","showPassword","setShowPassword","handleMouseDownInput","event","preventDefault","validateInputs","validated","isEmail","validate","some","u","length","PASSWORD_MIN_LENGTH","a","ApiFacade","UsersApi","createUser","displayName","ignoreTfa","forceFetchData","close","handleServerRestError","push","DashboardRoutes","path","padding","maxHeight","overflowY","overflowX","minHeight","TextField","error","value","placeholder","onChange","e","target","helperText","autoComplete","InputProps","endAdornment","InputAdornment","position","IconButton","onMouseDown","edge","Autocomplete","multiple","limitTags","options","getOptionLabel","option","o","newScope","renderInput","params","inputProps","marginBottom","Trans","i18nKey","Link","marginLeft","marginRight","href","SERVER_REPO_URL","Button","LoadingButton","minWidth","loading","loadingPosition","sortUsersFormula","b","UsersDesktopLayout","TableContainer","component","Paper","Table","stickyHeader","TableHead","TableRow","TableCell","remoteAccess","editProfile","deleteUser","TableBody","map","user","content","UsersMobileLayout","margin","DEFAULT_FONT_RATION","Typography","Users","wideDesktopMode","location","useLocation","remoteConnection","useLiveliness","deleting","setDeleting","showDeleteUserAlert","setShowDeleteUserAlert","filteredUsers","setFilteredUsers","remoteRegisteredUsers","setRemoteRegisteredUsers","deleteCandidate","setDeleteCandidate","useEffect","searchString","searchText","trim","toLowerCase","filter","sort","calcDevicesFilter","RemoteConnectionStatus","ConnectionOK","remoteRegisteredUsersService","Loader","PeopleAltIcon","pathname","CREATE_USER_PATH","Layout","Chip","label","ThemeTooltip","userRegistered","profile","CircularProgress","size","thickness","UsersPage"],"mappings":"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","file":"static/js/17.3b20db01.chunk.js","sourcesContent":["import { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Slide } from '@material-ui/core';\nimport MuiButton from \"@mui/material/Button\";\nimport { TransitionProps } from '@material-ui/core/transitions';\nimport * as React from 'react';\n\nconst Transition = React.forwardRef(function Transition(\n  props: TransitionProps & {\n    children?: React.ReactElement<any, any>;\n  },\n  ref: React.Ref<unknown>,\n) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\ninterface AlertDialogProps {\n\ttitle: string;\n\ttext?: string;\n\tsubmitText: string;\n\tcancelText: string;\n\topen: boolean;\n\tonSubmit: () => void;\n\tonCancel: () => void;\n\tsubmitColor?: \"inherit\" | \"error\" | \"primary\" | \"secondary\" | \"success\" | \"info\" | \"warning\" | undefined;\n}\n\nexport function AlertDialog(props: AlertDialogProps) {\n  const { open, onSubmit, onCancel, submitText, cancelText, text, title, submitColor } = props;\n\n  return (\n    <div>\n      <Dialog\n        open={open}\n        TransitionComponent={Transition}\n        keepMounted\n        onClose={onCancel}\n        aria-describedby=\"alert-dialog-slide-description\"\n      >\n        <DialogTitle>{title}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-slide-description\">\n            {text}\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button variant=\"contained\" onClick={onCancel}>{cancelText}</Button>\n          <MuiButton variant=\"contained\" color={submitColor} onClick={onSubmit}>{submitText}</MuiButton>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}","import { makeStyles, Theme, useTheme } from \"@material-ui/core\";\nimport Switch, { SwitchProps } from \"@mui/material/Switch\";\n\nconst useStyles = makeStyles((theme: Theme) => ({\n\ttrack: {\n\t\tbackgroundColor: `${theme.palette.grey[400]} !important`, // Used only for light mode, when the active is off, need to override the track color\n\t},\n}));\n\n/**\n * MUI  Switch with adaption to the dashboard's theme.\n */\nexport function ThemeSwitch(props: SwitchProps) {\n\tconst classes = useStyles();\n\tconst theme = useTheme();\n\n\treturn <Switch {...props} classes={{\n\t\t// Override the track color in light and inactive mode only\n\t\ttrack: theme.palette.type === 'light' && !props.checked ? classes.track : undefined\n\t}} />;\n}\n","import { Grid, Theme, Typography, useMediaQuery, useTheme } from \"@material-ui/core\";\nimport { getModeColor } from \"../logic/common/themeUtils\";\n\ninterface NoContentProps {\n\tfontRatio?: number;\n\tIcon: any;\n\tmessage: string;\n}\n\n/**\n * Generic 'no content' component to show for empty pages\n */\nexport function NoContent(props: NoContentProps) {\n\tconst theme = useTheme();\n\tconst desktopMode = useMediaQuery((theme: Theme) => theme.breakpoints.up('sm'));\n\n\tconst { Icon, message } = props;\n\tconst fontRatio = props.fontRatio || (desktopMode ? 50 : 35);\n\n\treturn <Grid\n\t\tstyle={{ width: '100%', height: '100%', textAlign: 'center' }}\n\t\tcontainer\n\t\tdirection=\"column\"\n\t\tjustifyContent=\"center\"\n\t\talignItems=\"center\"\n\t>\n\t\t<div>\n\t\t\t<Icon style={{ fontSize: fontRatio * 5, color: getModeColor(false, theme) }} />\n\t\t</div>\n\t\t<Typography style={{ fontSize: fontRatio * 0.9, marginTop: fontRatio * 0.5, color: getModeColor(false, theme) }} >{message}</Typography>\n\t</Grid>\n}","import { Paper, Theme, useMediaQuery } from \"@material-ui/core\";\nimport '../../theme/styles/layout/pageWithSideInfoLayout.scss';\n\ninterface PageLayoutProps {\n\t/** Page content */\n\tchildren: JSX.Element;\n\t/** Side info component */\n\tsideInfo?: JSX.Element;\n\t/** Whenever to show the Side info */\n\tshowSideInfo?: boolean;\n}\n\n/**\n * Dashboard page layout.\n * The layout contain creating fixed size of page content with scroll in case of overflow and as option \n * \"sideinfo\" with opening/closing smooth animation.\n * @param props The @see PageLayoutProps props\n */\nexport function PageLayout(props: PageLayoutProps) {\n\tconst largeDesktopMode = useMediaQuery((theme: Theme) => theme.breakpoints.up('md'));\n\tconst desktopMode = useMediaQuery((theme: Theme) => theme.breakpoints.up('sm'));\n\n\treturn <div className=\"page-container\">\n\t\t{/* Show page content only if side-info is hidden *or* it's very wide screen */}\n\t\t{<div className={`main-page-area ${props.showSideInfo && '---page-side-info-enabled'} ${!largeDesktopMode && props.showSideInfo && '--hide-main-page-area'}`}>\n\t\t\t{/* The page container */}\n\t\t\t<div className={`main-page-container ${!desktopMode && '--mobile'}`}>\n\t\t\t\t{props.children}\n\t\t\t</div>\n\t\t</div>}\n\t\t{/* If side info should be shown, show it */}\n\t\t{<div className={`page-side-info-area-container ${props.showSideInfo && '--page-side-info-enabled'} ${!largeDesktopMode && '--small-screen'}`}>\n\t\t\t<Paper elevation={3} className=\"page-side-full-info-card\" >\n\t\t\t\t{props.sideInfo}\n\t\t\t</Paper>\n\t\t</div>}\n\t</div>;\n}\n","import { AuthScopes } from \"../../infrastructure/generated/api\";\n\nexport const mapAuthScopeToDisplay: { [key in AuthScopes]: string } = {\n\t[AuthScopes.AdminAuth]: 'dashboard.profile.scope.admin',\n\t[AuthScopes.UserAuth]: 'dashboard.profile.scope.user',\n}\n","import { Grid, Theme, Typography, useMediaQuery, useTheme } from \"@material-ui/core\";\nimport { getModeColor } from \"../logic/common/themeUtils\";\nimport BlockIcon from '@mui/icons-material/Block';\nimport { useTranslation } from \"react-i18next\";\nimport { AuthScopes } from \"../infrastructure/generated/api\";\nimport { sessionManager } from \"../infrastructure/session-manager\";\n\ninterface NoPermissionsProps {\n\tfontRatio?: number;\n}\n\n/**\n * Generic 'no permission' component to show in case of forbidden access\n */\nexport function NoPermissions(props: NoPermissionsProps) {\n\tconst { t } = useTranslation();\n\tconst theme = useTheme();\n\tconst desktopMode = useMediaQuery((theme: Theme) => theme.breakpoints.up('sm'));\n\n\tconst fontRatio = props.fontRatio || (desktopMode ? 50 : 35);\n\n\treturn <Grid\n\t\tstyle={{ width: '100%', height: '100%', textAlign: 'center' }}\n\t\tcontainer\n\t\tdirection=\"column\"\n\t\tjustifyContent=\"center\"\n\t\talignItems=\"center\"\n\t>\n\t\t<div>\n\t\t\t<BlockIcon style={{ fontSize: fontRatio * 5, color: getModeColor(false, theme) }} />\n\t\t</div>\n\t\t<Typography style={{ fontSize: fontRatio * 0.9, marginTop: fontRatio * 0.5, color: getModeColor(false, theme) }} >{t('You dont have permission to see this content')}</Typography>\n\t</Grid>\n}\n\ninterface SensitiveContentProps {\n\trequiredScopes: AuthScopes[];\n\tchildren: JSX.Element;\n}\n\n/**\n * A simple component to wrap sensitives components and make sure the components renders only with the correct session scope.\n * Otherwise, only a 'NoPermissions' component will be shown \n * @param props \n * @returns \n */\nexport function SensitiveContent(props: SensitiveContentProps) {\n\tif (!props.requiredScopes.includes(sessionManager.scope)) {\n\t\treturn <NoPermissions />;\n\t}\n\treturn props.children;\n}\n\n","import { Button, Grid, IconButton, InputAdornment, TextField, useTheme } from \"@material-ui/core\";\nimport { AuthScopes } from \"../../infrastructure/generated/api\";\nimport { useHistory } from \"react-router-dom\";\nimport { Trans, useTranslation } from \"react-i18next\";\nimport { DashboardRoutes, PASSWORD_MIN_LENGTH, SERVER_REPO_URL, SIDE_CONTAINER_DEFAULT_FONT_SIZE } from \"../../infrastructure/consts\";\nimport { useState } from \"react\";\nimport { ApiFacade } from \"../../infrastructure/generated/proxies/api-proxies\";\nimport { handleServerRestError } from \"../../services/notifications.service\";\nimport Typography from '@mui/material/Typography';\nimport useMediaQuery from \"@mui/material/useMediaQuery\";\nimport { Theme } from \"@mui/material\";\nimport LoadingButton from '@mui/lab/LoadingButton';\nimport Autocomplete from '@mui/material/Autocomplete';\nimport HelpOutlineIcon from '@mui/icons-material/HelpOutline';\nimport Link from '@mui/material/Link';\nimport { usersService } from \"../../services/users.service\";\nimport { useData } from \"../../hooks/useData\";\nimport isEmail from 'isemail';\nimport VisibilityIcon from '@mui/icons-material/Visibility';\nimport VisibilityOffIcon from '@mui/icons-material/VisibilityOff';\nimport { mapAuthScopeToDisplay } from \"../../logic/common/usersUtils\";\nimport { ThemeSwitch } from \"../global/ThemeSwitch\";\n\nconst DEFAULT_FONT_SIZE = SIDE_CONTAINER_DEFAULT_FONT_SIZE;\n\ninterface CreateUserInputProps {\n\tchildren: JSX.Element;\n\ttext: string;\n\tdisabled?: boolean;\n\toptional?: boolean;\n}\n\nfunction CreateUserInput(props: CreateUserInputProps) {\n\tconst theme = useTheme();\n\n\treturn <div style={{ width: '100%' }}>\n\t\t<Grid\n\t\t\tstyle={{ width: '100%' }}\n\t\t\tcontainer\n\t\t\tdirection=\"row\"\n\t\t\tjustifyContent=\"space-between\"\n\t\t\talignItems=\"center\"\n\t\t>\n\t\t\t<div style={{ color: props.disabled ? theme.palette.text.hint : undefined }}>{props.text}{!props.disabled && !props.optional && '*'}</div>\n\t\t\t<div style={{ width: '75%' }} >{props.children}</div>\n\t\t</Grid>\n\t</div>;\n}\n\nexport function CreateUser() {\n\tconst { t } = useTranslation();\n\tconst history = useHistory();\n\tconst desktopMode = useMediaQuery((theme: Theme) => theme.breakpoints.up('sm'));\n\n\tconst [users] = useData(usersService, [], { skipErrorToastOnFailure: true });\n\n\tconst [creating, setCreating] = useState<boolean>();\n\n\tconst [name, setName] = useState<string>();\n\tconst [nameError, setNameError] = useState<boolean>();\n\n\tconst [email, setEmail] = useState<string>();\n\tconst [emailError, setEmailError] = useState<boolean>();\n\tconst [emailExistsError, setEmailExistsError] = useState<boolean>();\n\n\tconst [password, setPassword] = useState<string>();\n\tconst [passwordError, setPasswordError] = useState<boolean>();\n\tconst [passwordLengthError, setPasswordLengthError] = useState<boolean>();\n\n\tconst [passwordVerify, setPasswordVerify] = useState<string>();\n\tconst [passwordVerifyError, setPasswordVerifyError] = useState<boolean>();\n\tconst [passwordNotMatchError, setPasswordNotMatchError] = useState<boolean>();\n\n\tconst [scope, setScope] = useState<AuthScopes>();\n\tconst [scopeError, setScopeError] = useState<boolean>();\n\n\tconst [forceMfa, setForceMfa] = useState<boolean>(false);\n\n\tconst [showPassword, setShowPassword] = useState<boolean>(false);\n\n\tfunction handleMouseDownInput(event: React.MouseEvent<HTMLButtonElement>) {\n\t\tevent.preventDefault();\n\t};\n\n\t/**\n\t * Verify the user is ready for creation\n\t * @returns True when ever all required fields are OK \n\t */\n\tfunction validateInputs(): boolean {\n\t\tlet validated = true;\n\n\t\tif (!name) {\n\t\t\tvalidated = false;\n\t\t\tsetNameError(true);\n\t\t}\n\n\t\tif (!email || !isEmail.validate(email)) {\n\t\t\tvalidated = false;\n\t\t\tsetEmailError(true);\n\t\t} else if (users.some(u => u.email === email)) {\n\t\t\tvalidated = false;\n\t\t\tsetEmailError(true);\n\t\t\tsetEmailExistsError(true);\n\t\t}\n\n\t\tif (!password) {\n\t\t\tvalidated = false;\n\t\t\tsetPasswordError(true);\n\t\t} else if (password.length < PASSWORD_MIN_LENGTH) {\n\t\t\tvalidated = false;\n\t\t\tsetPasswordError(true);\n\t\t\tsetPasswordLengthError(true);\n\t\t}\n\n\t\tif (!passwordVerify) {\n\t\t\tvalidated = false;\n\t\t\tsetPasswordVerifyError(true);\n\t\t} else if (passwordVerify !== password) {\n\t\t\tvalidated = false;\n\t\t\tsetPasswordVerifyError(true);\n\t\t\tsetPasswordNotMatchError(true);\n\t\t}\n\n\t\tif (!scope) {\n\t\t\tvalidated = false;\n\t\t\tsetScopeError(true);\n\t\t}\n\n\t\treturn validated;\n\t}\n\n\t/**\n\t * Create the new user\n\t */\n\tasync function createUser() {\n\t\t// If not ready, abort\n\t\tif (!validateInputs()) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetCreating(true);\n\n\t\t// For lint only (the validateInputs passed)\n\t\tif (!email || !password || !scope) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tawait ApiFacade.UsersApi.createUser({\n\t\t\t\temail,\n\t\t\t\tpassword,\n\t\t\t\tscope,\n\t\t\t\tdisplayName: name,\n\t\t\t\tignoreTfa: !forceMfa,\n\t\t\t});\n\t\t\tawait usersService.forceFetchData();\n\t\t\t// Once it's succeed, close create user view\n\t\t\tclose();\n\t\t} catch (error) {\n\t\t\thandleServerRestError(error);\n\t\t}\n\t\tsetCreating(false);\n\t}\n\n\t/** Close create user view  */\n\tfunction close() {\n\t\thistory.push(DashboardRoutes.users.path);\n\t}\n\n\t// TODO: Rename class and scss file name\n\treturn <div className=\"page-full-info-area\">\n\t\t<Grid\n\t\t\tclassName={'page-full-info-container'}\n\t\t\tstyle={{ padding: DEFAULT_FONT_SIZE * 0.4 }}\n\t\t\tcontainer\n\t\t\tdirection=\"column\"\n\t\t\tjustifyContent=\"space-between\"\n\t\t\talignItems=\"stretch\"\n\t\t>\n\t\t\t<div style={{ width: '100%', textAlign: 'center' }}>\n\t\t\t\t<Typography variant=\"h4\" >{t('dashboard.users.create.new.user.name.title')}</Typography>\n\t\t\t</div>\n\t\t\t<div style={{ width: '100%', maxHeight: 'calc(100% - 100px)', overflowY: 'auto', overflowX: 'hidden' }}>\n\t\t\t\t<Grid\n\t\t\t\t\tstyle={{ width: '100%', height: '100%', minHeight: DEFAULT_FONT_SIZE * 8 }}\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection=\"column\"\n\t\t\t\t\tjustifyContent=\"space-evenly\"\n\t\t\t\t\talignItems=\"center\"\n\t\t\t\t>\n\t\t\t\t\t<CreateUserInput text={t('dashboard.users.create.new.user.name')}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tstyle={{ width: `100%` }}\n\t\t\t\t\t\t\tdisabled={creating}\n\t\t\t\t\t\t\terror={nameError}\n\t\t\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\t\tplaceholder={t('dashboard.users.create.new.user.name.placeholder')}\n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\tsetNameError(false);\n\t\t\t\t\t\t\t\tsetName(e.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CreateUserInput>\n\t\t\t\t\t<CreateUserInput text={t('dashboard.users.create.new.user.email')}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tstyle={{ width: `100%` }}\n\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\tdisabled={creating}\n\t\t\t\t\t\t\terror={emailError}\n\t\t\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\t\thelperText={emailExistsError ? t('dashboard.users.create.new.user.email.exist.help') : ''}\n\t\t\t\t\t\t\tplaceholder={t('dashboard.users.create.new.user.email.placeholder')}\n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\tsetEmailError(false);\n\t\t\t\t\t\t\t\tsetEmailExistsError(false);\n\t\t\t\t\t\t\t\tsetEmail(e.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CreateUserInput>\n\t\t\t\t\t<CreateUserInput text={t('dashboard.users.create.new.user.password')}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tstyle={{ width: `100%` }}\n\t\t\t\t\t\t\tdisabled={creating}\n\t\t\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\t\t\ttype={showPassword ? 'text' : 'password'}\n\t\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\t\terror={passwordError}\n\t\t\t\t\t\t\tplaceholder={t('dashboard.users.create.new.user.password.placeholder')}\n\t\t\t\t\t\t\thelperText={!passwordLengthError ? '' : t('dashboard.profile.override.pass.new.password.help', { length: PASSWORD_MIN_LENGTH })}\n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\tsetPasswordError(false);\n\t\t\t\t\t\t\t\tsetPasswordLengthError(false);\n\t\t\t\t\t\t\t\tsetPassword(e.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t// Disable browser password suggestions\n\t\t\t\t\t\t\tautoComplete={'new-password'}\n\t\t\t\t\t\t\tInputProps={{\n\t\t\t\t\t\t\t\tendAdornment: (\n\t\t\t\t\t\t\t\t\t<InputAdornment position=\"end\">\n\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => { setShowPassword(!showPassword); }}\n\t\t\t\t\t\t\t\t\t\t\tonMouseDown={handleMouseDownInput}\n\t\t\t\t\t\t\t\t\t\t\tedge=\"end\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{showPassword ? <VisibilityIcon /> : <VisibilityOffIcon />}\n\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t</InputAdornment>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CreateUserInput>\n\t\t\t\t\t<CreateUserInput text={t('dashboard.users.create.new.user.retype.password')}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tstyle={{ width: `100%` }}\n\t\t\t\t\t\t\tdisabled={creating}\n\t\t\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\t\t\ttype={showPassword ? 'text' : 'password'}\n\t\t\t\t\t\t\tvalue={passwordVerify}\n\t\t\t\t\t\t\terror={passwordVerifyError}\n\t\t\t\t\t\t\tplaceholder={t('dashboard.users.create.new.user.retype.password.placeholder')}\n\t\t\t\t\t\t\thelperText={!passwordNotMatchError ? '' : t('dashboard.users.create.new.user.retype.not.match.password.help')}\n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\tsetPasswordVerifyError(false);\n\t\t\t\t\t\t\t\tsetPasswordNotMatchError(false);\n\t\t\t\t\t\t\t\tsetPasswordVerify(e.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t// Disable browser password suggestions\n\t\t\t\t\t\t\tautoComplete={'new-password'}\n\t\t\t\t\t\t\tInputProps={{\n\t\t\t\t\t\t\t\tendAdornment: (\n\t\t\t\t\t\t\t\t\t<InputAdornment position=\"end\">\n\t\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => { setShowPassword(!showPassword); }}\n\t\t\t\t\t\t\t\t\t\t\tonMouseDown={handleMouseDownInput}\n\t\t\t\t\t\t\t\t\t\t\tedge=\"end\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{showPassword ? <VisibilityIcon /> : <VisibilityOffIcon />}\n\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t</InputAdornment>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CreateUserInput>\n\t\t\t\t\t<CreateUserInput text={t('dashboard.users.user.scope')}>\n\t\t\t\t\t\t<Autocomplete\n\t\t\t\t\t\t\tstyle={{ width: `100%` }}\n\t\t\t\t\t\t\tdisabled={creating}\n\t\t\t\t\t\t\tmultiple\n\t\t\t\t\t\t\tlimitTags={1}\n\t\t\t\t\t\t\toptions={[AuthScopes.AdminAuth, AuthScopes.UserAuth]}\n\t\t\t\t\t\t\tgetOptionLabel={(option) => t(mapAuthScopeToDisplay[option])}\n\t\t\t\t\t\t\tvalue={scope ? [scope] : []}\n\t\t\t\t\t\t\tonChange={(e, o) => {\n\t\t\t\t\t\t\t\t// Take the newest scope (since only once selection at a time currently supported)\n\t\t\t\t\t\t\t\tconst newScope = o[o.length - 1];\n\t\t\t\t\t\t\t\tsetScopeError(false);\n\t\t\t\t\t\t\t\tsetScope(newScope);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\trenderInput={(params) => (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\t\t\t\terror={scopeError}\n\t\t\t\t\t\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CreateUserInput>\n\t\t\t\t\t<CreateUserInput text={t('dashboard.users.user.2fa')} optional>\n\t\t\t\t\t\t<ThemeSwitch\n\t\t\t\t\t\t\tdisabled={creating}\n\t\t\t\t\t\t\tchecked={forceMfa}\n\t\t\t\t\t\t\tonChange={() => setForceMfa(!forceMfa)}\n\t\t\t\t\t\t\tinputProps={{ 'aria-label': 'controlled' }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CreateUserInput>\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t\t<div style={{ marginBottom: DEFAULT_FONT_SIZE * 0.7 }}>\n\t\t\t\t<Grid\n\t\t\t\t\tstyle={{ width: `100%` }}\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\tjustifyContent=\"space-around\"\n\t\t\t\t\talignItems=\"center\"\n\t\t\t\t>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<HelpOutlineIcon />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div style={{ width: `80%` }}>\n\t\t\t\t\t\t<Trans i18nKey=\"dashboard.users.create.new.user.info\">\n\t\t\t\t\t\t\tFor more information about the 2FA (multi-factor authentication) see\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tstyle={{ marginLeft: 3, marginRight: 3 }}\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\thref={`${SERVER_REPO_URL}/tree/development/backend#two-factor-authentication-mfa`}>\n\t\t\t\t\t\t\t\tcasanet 2FA documentation\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</Trans>\n\t\t\t\t\t</div>\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t\t<div style={{ width: '100%' }}>\n\t\t\t\t<Grid\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\tjustifyContent=\"space-between\"\n\t\t\t\t\talignItems=\"flex-end\"\n\t\t\t\t>\n\t\t\t\t\t<Button disabled={creating} variant=\"contained\" onClick={close}>{t('global.cancel')}</Button>\n\t\t\t\t\t<LoadingButton\n\t\t\t\t\t\tstyle={{ minWidth: desktopMode ? 200 : 0 }}\n\t\t\t\t\t\tloading={creating}\n\t\t\t\t\t\tdisabled={creating}\n\t\t\t\t\t\tloadingPosition={desktopMode ? 'start' : 'center'}\n\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\tcolor={'primary'}\n\t\t\t\t\t\tonClick={createUser}>\n\t\t\t\t\t\t{t('dashboard.users.create.new.user.creat.user')}\n\t\t\t\t\t</LoadingButton>\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t</Grid>\n\t</div>;\n}\n","import Table from '@mui/material/Table';\nimport TableBody from '@mui/material/TableBody';\nimport TableCell from '@mui/material/TableCell';\nimport TableContainer from '@mui/material/TableContainer';\nimport TableHead from '@mui/material/TableHead';\nimport TableRow from '@mui/material/TableRow';\nimport Paper from '@mui/material/Paper';\nimport { CircularProgress, Grid, IconButton, Theme, Typography, useMediaQuery, useTheme } from '@material-ui/core';\nimport { AuthScopes, RemoteConnectionStatus, User } from '../../infrastructure/generated/api';\nimport { ComponentType, useEffect, useState } from 'react';\nimport { handleServerRestError } from '../../services/notifications.service';\nimport { Loader } from '../../components/Loader';\nimport { useTranslation } from 'react-i18next';\nimport { ThemeTooltip } from '../../components/global/ThemeTooltip';\nimport { CREATE_USER_PATH, DashboardRoutes, DEFAULT_FONT_RATION } from '../../infrastructure/consts';\nimport { ApiFacade } from '../../infrastructure/generated/proxies/api-proxies';\nimport { DashboardPageInjectProps } from '../Dashboard';\nimport { NoContent } from '../../components/NoContent';\nimport RouterIcon from '@material-ui/icons/Router';\nimport { usersService, remoteRegisteredUsersService } from '../../services/users.service';\nimport PeopleAltIcon from '@material-ui/icons/PeopleAlt';\nimport { mapAuthScopeToDisplay } from '../../logic/common/usersUtils';\nimport VerifiedUserIcon from '@mui/icons-material/VerifiedUser';\nimport RemoveModeratorIcon from '@mui/icons-material/RemoveModerator';\nimport CloudDoneIcon from '@mui/icons-material/CloudDone';\nimport CloudOffIcon from '@mui/icons-material/CloudOff';\nimport Chip from '@mui/material/Chip';\nimport DeleteForeverIcon from '@mui/icons-material/DeleteForever';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { useLiveliness } from '../../hooks/useLiveliness';\nimport { useData } from '../../hooks/useData';\nimport { PageLayout } from '../../components/layouts/PageLayout';\nimport { CreateUser } from '../../components/users/CreateUser';\nimport { AlertDialog } from '../../components/AlertDialog';\nimport LaunchIcon from '@mui/icons-material/Launch';\nimport { SensitiveContent } from '../../components/NoPermissions';\n\n/**\n * The sort formula for sorting users by email\n */\nfunction sortUsersFormula(a: User, b: User): number {\n\treturn a.email < b.email ? -1 : 1;\n}\n\ninterface UserComponentProps {\n\tuser: User;\n}\n\ninterface UserComponent {\n\ttitle: string;\n\tcontent: ComponentType<UserComponentProps>;\n}\n\ninterface UsersLayoutProps {\n\tusers: User[];\n\temail: UserComponent;\n\tname: UserComponent;\n\tscope: UserComponent;\n\tignoreTfa: UserComponent;\n\tremoteAccess: UserComponent;\n\teditProfile: UserComponent;\n\tdeleteUser: UserComponent;\n}\n\n/**\n * The users page desktops layout.\n */\nfunction UsersDesktopLayout(props: UsersLayoutProps) {\n\t// In desktops, show data in a simple table\n\treturn <TableContainer component={Paper}>\n\t\t<Table stickyHeader>\n\t\t\t<TableHead>\n\t\t\t\t<TableRow>\n\t\t\t\t\t<TableCell >{props.email.title}</TableCell>\n\t\t\t\t\t<TableCell >{props.name.title}</TableCell>\n\t\t\t\t\t<TableCell >{props.scope.title}</TableCell>\n\t\t\t\t\t<TableCell >{props.ignoreTfa.title}</TableCell>\n\t\t\t\t\t<TableCell >{props.remoteAccess.title}</TableCell>\n\t\t\t\t\t<TableCell >{props.editProfile.title}</TableCell>\n\t\t\t\t\t<TableCell >{props.deleteUser.title}</TableCell>\n\t\t\t\t</TableRow>\n\t\t\t</TableHead>\n\t\t\t<TableBody >\n\t\t\t\t{props.users.map(user => <TableRow >\n\t\t\t\t\t<TableCell ><props.email.content user={user} /></TableCell>\n\t\t\t\t\t<TableCell ><props.name.content user={user} /></TableCell>\n\t\t\t\t\t<TableCell ><props.scope.content user={user} /></TableCell>\n\t\t\t\t\t<TableCell ><props.ignoreTfa.content user={user} /></TableCell>\n\t\t\t\t\t<TableCell ><props.remoteAccess.content user={user} /></TableCell>\n\t\t\t\t\t<TableCell ><props.editProfile.content user={user} /></TableCell>\n\t\t\t\t\t<TableCell ><props.deleteUser.content user={user} /></TableCell>\n\t\t\t\t</TableRow>)}\n\t\t\t</TableBody>\n\t\t</Table>\n\t</TableContainer>;\n}\n\n/**\n * The users page mobile layout\n */\nfunction UsersMobileLayout(props: UsersLayoutProps) {\n\tconst theme = useTheme();\n\n\treturn <Grid\n\t\tcontainer\n\t\tdirection=\"column\"\n\t\tjustifyContent=\"center\"\n\t\talignItems=\"stretch\"\n\t>\n\t\t{props.users.map(user =>\n\t\t\t// Each user has own card \n\t\t\t<Paper elevation={3} style={{ margin: DEFAULT_FONT_RATION }}>\n\t\t\t\t<Grid\n\t\t\t\t\tstyle={{ padding: DEFAULT_FONT_RATION }}\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection=\"column\"\n\t\t\t\t\tjustifyContent=\"center\"\n\t\t\t\t\talignItems=\"stretch\"\n\t\t\t\t>\n\t\t\t\t\t{/* On first row, show the user mail */}\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tstyle={{ width: '100%', marginBottom: DEFAULT_FONT_RATION }}\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\t\tjustifyContent=\"flex-start\"\n\t\t\t\t\t\talignItems=\"center\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Typography style={{ fontSize: DEFAULT_FONT_RATION * 0.7, width: '100%', color: theme.palette.text.hint }} >{props.email.title}</Typography>\n\t\t\t\t\t\t<Typography style={{ fontSize: DEFAULT_FONT_RATION * 1 }} ><props.email.content user={user} /></Typography>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t{/* On second row, show the user name */}\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tstyle={{ width: '100%', marginBottom: DEFAULT_FONT_RATION }}\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\t\tjustifyContent=\"flex-start\"\n\t\t\t\t\t\talignItems=\"center\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Typography style={{ fontSize: DEFAULT_FONT_RATION * 0.7, width: '100%', color: theme.palette.text.hint }} >{props.name.title}</Typography>\n\t\t\t\t\t\t<Typography style={{ fontSize: DEFAULT_FONT_RATION * 1 }} ><props.name.content user={user} /></Typography>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t{/* On third row, show the user's controls and info such as scope, auth, delete etc */}\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tstyle={{ width: '100%' }}\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\t\tjustifyContent=\"space-between\"\n\t\t\t\t\t\talignItems=\"flex-end\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{/* Add marginBottom: 6 to match scope content \"space\" with other icon buttons */}\n\t\t\t\t\t\t\t<div style={{ marginBottom: 6, marginTop: 6, fontSize: DEFAULT_FONT_RATION }} ><props.scope.content user={user} /></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div style={{ fontSize: DEFAULT_FONT_RATION }} ><props.ignoreTfa.content user={user} /></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div style={{ fontSize: DEFAULT_FONT_RATION }} ><props.remoteAccess.content user={user} /></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div style={{ fontSize: DEFAULT_FONT_RATION }} ><props.editProfile.content user={user} /></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div style={{ fontSize: DEFAULT_FONT_RATION }} ><props.deleteUser.content user={user} /></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</Paper>\n\t\t)\n\t\t}\n\t</Grid >\n}\n\nfunction Users(props: DashboardPageInjectProps) {\n\tconst { t } = useTranslation();\n\tconst wideDesktopMode = useMediaQuery((theme: Theme) => theme.breakpoints.up('md'));\n\tconst history = useHistory();\n\tconst location = useLocation();\n\tconst { remoteConnection } = useLiveliness();\n\tconst [users, loading] = useData(usersService, []);\n\n\tconst [deleting, setDeleting] = useState<boolean>(false);\n\tconst [showDeleteUserAlert, setShowDeleteUserAlert] = useState<boolean>(false);\n\tconst [filteredUsers, setFilteredUsers] = useState<User[]>([]);\n\tconst [remoteRegisteredUsers, setRemoteRegisteredUsers] = useState<string[]>();\n\tconst [deleteCandidate, setDeleteCandidate] = useState<User>();\n\n\tuseEffect(() => {\n\t\t// every time the devices collection has changed or the search term changed, re-calc the filtered minions\n\t\tcalcDevicesFilter(users);\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [users, props.searchText]);\n\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\t// Every time the remote connection status is/changed  to OK, fetch registered users list. \n\t\t\tif (remoteConnection === RemoteConnectionStatus.ConnectionOK) {\n\t\t\t\ttry {\n\t\t\t\t\tconst remoteRegisteredUsers = await remoteRegisteredUsersService.forceFetchData();\n\t\t\t\t\tsetRemoteRegisteredUsers(remoteRegisteredUsers);\n\t\t\t\t} catch (error) {\n\n\t\t\t\t}\n\t\t\t}\n\t\t})();\n\t}, [remoteConnection]);\n\n\tfunction calcDevicesFilter(users: User[]) {\n\t\tconst searchString = props.searchText?.trim().toLowerCase() || '';\n\t\t// In case of empty search term, \"clone\" collection anyway to avoid sort cache issue\n\t\tconst filteredUsers = !searchString ? [...users] : users.filter(user => {\n\t\t\t// If the name match, return true\n\t\t\tif (user.email?.toLowerCase().includes(searchString)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (user.displayName?.toLowerCase().includes(searchString)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\n\t\tsetFilteredUsers(filteredUsers.sort(sortUsersFormula));\n\t}\n\n\tfunction goToProfile(user: User) {\n\t\thistory.push(`${DashboardRoutes.profile.path}/${user.email}`);\n\t};\n\n\tasync function deleteUser() {\n\t\t// If there is no candidate, abort\n\t\tif (!deleteCandidate) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetDeleting(true);\n\t\ttry {\n\t\t\tawait ApiFacade.UsersApi.deleteUser(deleteCandidate.email);\n\t\t\tawait usersService.forceFetchData();\n\t\t} catch (error) {\n\t\t\thandleServerRestError(error);\n\t\t}\n\t\tsetDeleting(false);\n\t}\n\n\tif (loading) {\n\t\treturn <Loader />;\n\t}\n\n\t// If there are no any user, show proper message\n\tif (users.length === 0) {\n\t\treturn <NoContent Icon={PeopleAltIcon} message={t('dashboard.users.no.user.message')} />\n\t}\n\n\t// If there are no any user match the search term, show proper message\n\tif (filteredUsers.length === 0) {\n\t\treturn <NoContent Icon={PeopleAltIcon} message={t('dashboard.users.no.users.match.message')} />\n\t}\n\n\tfunction EmailComponent(props: UserComponentProps) {\n\t\treturn <div>{props.user.email}</div>;\n\t}\n\n\tfunction DisplayNameComponent(props: UserComponentProps) {\n\t\treturn <div>{props.user.displayName}</div>;\n\t}\n\n\tfunction ScopeComponent(props: UserComponentProps) {\n\t\treturn <Chip label={t(mapAuthScopeToDisplay[props.user.scope])} />;\n\t}\n\n\tfunction TfaComponent(props: UserComponentProps) {\n\t\treturn <ThemeTooltip title={<span>{t(`dashboard.users.2fa.is.${props.user.ignoreTfa ? 'off' : 'on'}`)}</span>} >\n\t\t\t<IconButton\n\t\t\t\tcolor=\"inherit\">\n\t\t\t\t{props.user.ignoreTfa ? <RemoveModeratorIcon fontSize=\"small\" /> : <VerifiedUserIcon fontSize=\"small\" />}\n\t\t\t</IconButton>\n\t\t</ThemeTooltip>;\n\t}\n\n\tfunction RemoteAccessComponent(props: UserComponentProps) {\n\n\t\tconst userRegistered = remoteRegisteredUsers?.includes(props.user.email);\n\n\t\treturn <ThemeTooltip title={<span>{t(!remoteRegisteredUsers\n\t\t\t? 'dashboard.users.remote.access.status.no.connection'\n\t\t\t: userRegistered\n\t\t\t\t? 'dashboard.users.remote.access.status.registered'\n\t\t\t\t: 'dashboard.users.remote.access.status.unregistered')}\n\t\t</span>} >\n\t\t\t<IconButton\n\t\t\t\tcolor=\"inherit\">\n\t\t\t\t{!remoteRegisteredUsers && <CloudOffIcon fontSize=\"small\" />}\n\t\t\t\t{remoteRegisteredUsers && userRegistered && <CloudDoneIcon fontSize=\"small\" />}\n\t\t\t\t{remoteRegisteredUsers && !userRegistered && <RouterIcon fontSize=\"small\" />}\n\t\t\t</IconButton>\n\t\t</ThemeTooltip>;\n\t}\n\n\tfunction EditProfileComponent(props: UserComponentProps) {\n\t\treturn <ThemeTooltip title={<span>{t('dashboard.users.go.to.profile')}</span>} >\n\t\t\t<IconButton\n\t\t\t\tdisabled={deleting}\n\t\t\t\tonClick={() => goToProfile(props.user)}\n\t\t\t\tcolor=\"inherit\">\n\t\t\t\t<LaunchIcon fontSize=\"small\" />\n\t\t\t</IconButton>\n\t\t</ThemeTooltip>;\n\t}\n\n\tfunction DeleteUserComponent(props: UserComponentProps) {\n\t\treturn <ThemeTooltip title={<span>{t('global.delete')}</span>} >\n\t\t\t<IconButton\n\t\t\t\tdisabled={deleting}\n\t\t\t\tonClick={() => { setShowDeleteUserAlert(true); setDeleteCandidate(props.user); }}\n\t\t\t\tcolor=\"inherit\">\n\t\t\t\t{(!deleting || deleteCandidate?.email !== props.user.email) && <DeleteForeverIcon fontSize=\"small\" />}\n\t\t\t\t{(deleting && deleteCandidate?.email === props.user.email) && <CircularProgress size={15} color=\"inherit\" thickness={5} />}\n\t\t\t</IconButton>\n\t\t</ThemeTooltip>;\n\t}\n\n\tconst showSideInfo = location?.pathname === CREATE_USER_PATH;\n\tconst Layout = wideDesktopMode ? UsersDesktopLayout : UsersMobileLayout;\n\n\treturn <div style={{ width: '100%', height: '100%' }}>\n\t\t<AlertDialog\n\t\t\topen={showDeleteUserAlert}\n\t\t\tcancelText={t('global.cancel')}\n\t\t\tsubmitText={t('global.delete')}\n\t\t\ttitle={t('dashboard.users.delete.user.alert.title', { name: deleteCandidate?.displayName })}\n\t\t\ttext={t('dashboard.users.delete.user.alert.text', { email: deleteCandidate?.email, name: deleteCandidate?.displayName })}\n\t\t\tonCancel={() => setShowDeleteUserAlert(false)}\n\t\t\tonSubmit={() => { setShowDeleteUserAlert(false); deleteUser(); }}\n\t\t\tsubmitColor={'error'}\n\t\t/>\n\n\t\t<PageLayout\n\t\t\tshowSideInfo={showSideInfo}\n\t\t\t// Empty DOM if side info not should be shown\n\t\t\tsideInfo={showSideInfo ? <CreateUser /> : <div></div>}\n\t\t>\n\t\t\t<Grid\n\t\t\t\tstyle={{ width: '100%', height: '100%' }}\n\t\t\t\tcontainer\n\t\t\t\tdirection=\"column\"\n\t\t\t\tjustifyContent=\"space-between\"\n\t\t\t\talignItems=\"stretch\"\n\t\t\t>\n\t\t\t\t<Layout\n\t\t\t\t\tusers={filteredUsers}\n\t\t\t\t\temail={{\n\t\t\t\t\t\ttitle: t('dashboard.users.user.email'),\n\t\t\t\t\t\tcontent: EmailComponent\n\t\t\t\t\t}}\n\t\t\t\t\tname={{\n\t\t\t\t\t\ttitle: t('dashboard.users.user.name'),\n\t\t\t\t\t\tcontent: DisplayNameComponent\n\t\t\t\t\t}}\n\t\t\t\t\tscope={{\n\t\t\t\t\t\ttitle: t('dashboard.users.user.scope'),\n\t\t\t\t\t\tcontent: ScopeComponent\n\t\t\t\t\t}}\n\t\t\t\t\tignoreTfa={{\n\t\t\t\t\t\ttitle: t('dashboard.users.user.2fa'),\n\t\t\t\t\t\tcontent: TfaComponent\n\t\t\t\t\t}}\n\t\t\t\t\tremoteAccess={{\n\t\t\t\t\t\ttitle: t('dashboard.users.user.access'),\n\t\t\t\t\t\tcontent: RemoteAccessComponent\n\t\t\t\t\t}}\n\t\t\t\t\teditProfile={{\n\t\t\t\t\t\ttitle: t('dashboard.users.user.profile'),\n\t\t\t\t\t\tcontent: EditProfileComponent\n\t\t\t\t\t}}\n\t\t\t\t\tdeleteUser={{\n\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\tcontent: DeleteUserComponent\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Grid>\n\t\t</PageLayout>\n\t</div>;\n}\n\nexport default function UsersPage(props: DashboardPageInjectProps) {\n\treturn <SensitiveContent requiredScopes={[AuthScopes.AdminAuth]}>\n\t\t<Users {...props} />\n\t</SensitiveContent>\n}\n"],"sourceRoot":""}